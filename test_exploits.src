import_code("library/basic.inc.src")
import_code("library/metasploit.inc.src")

metaxploit = _load_metasploit

if params.len < 2 or params[0] == "--help" then
	exit "test_remote_exploits [Library] [ExploitFile] [[parameter]]"
end if

remote_lib = _load_metalib(metaxploit, params[0])

if not remote_lib then
    exit "Failed to load library"
end if

exploits = _load_exploits(params[1])

parameter = ""
if params.len > 2 then
    parameter = params[2]
end if

_test_exploits(remote_lib, exploits, parameter)